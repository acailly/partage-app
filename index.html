<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Partage Chateaubourg</title>

    <link href="https://unpkg.com/m-@1.6.0/dist/min.css" rel="stylesheet" />
    <script src="https://unpkg.com/m-@1.6.0/dist/min.js" defer></script>
  </head>
  <body class="bg-offwhite">
    <m-container maxwidth="md">
      <header class="flex flx-col justify-content-center pad-b-xl">
        <h1 class="txt-center">Partage sur Châteaubourg</h1>
        <a
          role="button"
          ord="primary"
          href="add.html"
          class="align-self-center"
        >
          Prêter mes objets
        </a>
      </header>

      <datalist id="Liste des catégories">
        <option>🛠️ Bricolage et jardinage</option>
        <option>🚴‍♀️ Vélo, trotinette, etc. et accessoires</option>
        <option>⛹️ Matériel de sport</option>
        <option>🪀 Jouets</option>
        <option>📱 High Tech</option>
      </datalist>

      <datalist id="🛠️ Bricolage et jardinage">
        <option>Perceuse / visseuse</option>
        <option>Pelle</option>
        <option>Rateau</option>
        <option>Tondeuse</option>
        <option>Coupe bordure</option>
        <option>Etabli</option>
        <option>Scie sauteuse</option>
        <option>Souffleur / Aspirateur à feuille</option>
        <option>Pioche</option>
        <option>Grelinette</option>
        <option>Clés et tournevis</option>
      </datalist>

      <datalist id="🚴‍♀️ Vélo, trotinette, etc. et accessoires">
        <option>Vélo</option>
        <option>Trotinette</option>
        <option>Pompe à vélo</option>
        <option>Sacoche</option>
      </datalist>

      <datalist id="⛹️ Matériel de sport"></datalist>
      
      <datalist id="🪀 Jouets"></datalist>
      
      <datalist id="📱 High Tech"></datalist>

      <script>
        let html = "";

        const listeCatégories = Array.from(
          document.getElementById("Liste des catégories").options
        );

        listeCatégories.forEach((catégorie) => {
          const listeObjetsDansCatégorie = Array.from(
            document.getElementById(catégorie.value).options
          );

          html += `<section class="pad-all-md">`;
          html += `<h4>${catégorie.value} (${listeObjetsDansCatégorie.length} types d'objets)</h4>`;
          html += `<m-box ord="primary" class="pad-l-lg">`;

          let premièreColonne = true;
          listeObjetsDansCatégorie.forEach((objet) => {
            if (premièreColonne) {
              html += `<m-row>`;
            }

            html += `<m-col>`;
            html += `<a href="ask.html?object=${objet.value}">${objet.value}</a>`;
            html += `</m-col>`;

            if (!premièreColonne) {
              html += `</m-row>`;
            }

            premièreColonne = !premièreColonne;
          });

          html += `</m-box>`;
          html += `</section>`;
        });

        const main = document.createElement("main");
        main.innerHTML = html;

        document.currentScript.after(main);
        document.currentScript.remove();
      </script>
    </m-container>
  </body>
</html>
